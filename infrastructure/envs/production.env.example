# =============================================================================
# SEO Health Report System - Production Environment Configuration
# =============================================================================
# PRODUCTION SECRETS - Handle with extreme care
# Use GitHub Secrets, Vault, or similar secure storage
# NEVER commit actual values to version control

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_ENV=production
DEBUG=false
LOG_LEVEL=WARNING

# Application version (set by CI/CD)
APP_VERSION=0.0.0
GIT_SHA=unknown

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string for production
# Use connection pooling (PgBouncer) in production
DATABASE_URL=postgresql://seo_prod:${DB_PASSWORD}@prod-db.example.com:5432/seo_health_prod

# Connection pool settings (production tuned)
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
# JWT secret key (256-bit minimum, rotate periodically)
JWT_SECRET_KEY=${JWT_SECRET_KEY}

# Token expiration (shorter for production)
JWT_ACCESS_TOKEN_EXPIRE_SECONDS=1800
JWT_REFRESH_TOKEN_EXPIRE_SECONDS=259200

# Password hashing (higher rounds for production)
PASSWORD_HASH_ROUNDS=14

# Secure cookie settings
COOKIE_SECURE=true
COOKIE_SAMESITE=strict

# -----------------------------------------------------------------------------
# API Keys & External Services
# -----------------------------------------------------------------------------
# Google PageSpeed API key (production quota)
PAGESPEED_API_KEY=${PAGESPEED_API_KEY}

# OpenAI API key (production)
OPENAI_API_KEY=${OPENAI_API_KEY}

# Stripe API keys (live mode)
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}

# -----------------------------------------------------------------------------
# CORS Configuration (Strict)
# -----------------------------------------------------------------------------
# Only allow production domains
CORS_ORIGINS=https://seohealthreport.com,https://app.seohealthreport.com,https://dashboard.seohealthreport.com

# -----------------------------------------------------------------------------
# Rate Limiting (Production)
# -----------------------------------------------------------------------------
# Requests per minute by tier
RATE_LIMIT_BASIC=100
RATE_LIMIT_PRO=500
RATE_LIMIT_ENTERPRISE=2000

# Audit limits
MAX_CONCURRENT_AUDITS_BASIC=2
MAX_CONCURRENT_AUDITS_PRO=5
MAX_CONCURRENT_AUDITS_ENTERPRISE=20

# IP-based rate limiting
RATE_LIMIT_PER_IP=60

# -----------------------------------------------------------------------------
# Storage Configuration
# -----------------------------------------------------------------------------
# Report storage (use object storage in production)
REPORT_STORAGE_PATH=/app/reports

# S3/Object storage (recommended for production)
S3_BUCKET_NAME=${S3_BUCKET_NAME}
S3_REGION=${S3_REGION}
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}

# Signed URL expiration (seconds)
SIGNED_URL_EXPIRATION=3600

# -----------------------------------------------------------------------------
# Worker Configuration
# -----------------------------------------------------------------------------
WORKER_CONCURRENCY=8
WORKER_LEASE_SECONDS=600
WORKER_HEARTBEAT_INTERVAL=30
WORKER_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
# Metrics endpoint
METRICS_ENABLED=true

# Sentry for error tracking
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Structured logging
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# Feature Flags (Production)
# -----------------------------------------------------------------------------
FEATURE_AI_ANALYSIS=true
FEATURE_COMPETITIVE_INTEL=true
FEATURE_PREMIUM_REPORTS=true
FEATURE_WEBHOOKS=true

# -----------------------------------------------------------------------------
# Production Security Settings
# -----------------------------------------------------------------------------
# Disable test accounts
ALLOW_TEST_ACCOUNTS=false

# Production cache TTL
CACHE_TTL_SECONDS=3600

# No verbose errors in production
VERBOSE_ERRORS=false

# Security headers
HSTS_MAX_AGE=31536000
CONTENT_SECURITY_POLICY=default-src 'self'

# -----------------------------------------------------------------------------
# Backup & Recovery
# -----------------------------------------------------------------------------
# Database backup settings
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
