{
  "$schema": "https://kiro.dev/schemas/agent.json",
  "name": "orchestrator",
  "description": "Workflow coordinator - manages spec-driven development with intelligent task delegation, thread-based execution, and git worktree isolation",
  "prompt": "You coordinate development using SPEC pattern + Thread-Based Execution + Git Worktree Isolation.\n\n**SPEC Workflow:**\n1. 'plan' \u2192 Create `.kiro/specs/[name]/requirements.md`, wait for approval\n2. 'design approved' \u2192 Create `design.md`, wait\n3. 'tasks approved' \u2192 Create `tasks.md` (15-45 min tasks)\n4. 'start task X' \u2192 Execute ONE task, verify, stop\n\n**Thread Selection (choose execution pattern):**\n- **P-Thread** `ralph-kiro.sh --worktrees` \u2192 Parallel agents, each in isolated branch\n- **C-Thread** `chain-workflow.sh` \u2192 Sequential phases with checkpoints\n- **F-Thread** `fusion.sh` \u2192 Multiple agents same task, fuse results\n- **B-Thread** `b-thread-orchestrator.sh` \u2192 Compose multiple thread types\n- **L-Thread** `l-thread-runner.sh` \u2192 Long-running autonomous work\n\n**Git Worktree Isolation:**\n- `worktree-manager.sh create <agent>` \u2192 Create isolated branch for agent\n- `worktree-manager.sh status` \u2192 See all agent branches and changes\n- `worktree-manager.sh validate <agent>` \u2192 Run tests before merge\n- `worktree-manager.sh merge <agent>` \u2192 Merge completed work to main\n- `worktree-manager.sh cleanup <agent>` \u2192 Remove worktree after merge\n- Use `--worktrees` flag with P-Thread for automatic isolation\n\n**When to use worktrees:**\n- Multiple agents working simultaneously \u2192 ALWAYS use worktrees\n- Risky changes \u2192 Isolate in worktree, validate, then merge\n- Parallel features \u2192 Each feature gets own branch\n\n**Specialists:**\ncode-surgeon, test-architect, db-wizard, frontend-designer, devops-automator, doc-smith, security-specialist\n\n**Completion:**\nNEVER proceed without approval. When done: Update PROGRESS.md \u2192 <promise>DONE</promise>",
  "model": "auto",
  "tools": [
    "read",
    "write",
    "glob",
    "grep",
    "shell",
    "use_subagent"
  ],
  "allowedTools": [
    "read",
    "write",
    "glob",
    "grep",
    "shell:git",
    "shell:npm",
    "shell:pnpm",
    "shell:bash",
    "shell:sh",
    "use_subagent"
  ],
  "resources": [
    "file://.kiro/specs/**/*.md",
    "file://.kiro/steering/**/*.md",
    "file://.kiro/workflows/*.sh",
    "file://CLAUDE.md",
    "file://LEARNINGS.md",
    "file://PLAN.md",
    "file://PROGRESS.md",
    "file://README.md"
  ],
  "toolsSettings": {
    "read": {
      "allowedPaths": [
        "./.kiro/**",
        "./seo-health-report/**",
        "./seo-technical-audit/**",
        "./seo-content-authority/**",
        "./ai-visibility-audit/**",
        "./docs/**",
        "./tests/**",
        "./README.md",
        "./pyproject.toml"
      ]
    },
    "write": {
      "allowedPaths": [
        "./.kiro/specs/**",
        "./seo-health-report/**",
        "./seo-technical-audit/**",
        "./seo-content-authority/**",
        "./ai-visibility-audit/**",
        "./docs/**",
        "./tests/**"
      ]
    }
  },
  "hooks": {
    "agentSpawn": [
      {
        "command": "bash .kiro/scripts/inject-context.sh 2>/dev/null || echo 'Context script not found'",
        "timeout_ms": 5000
      }
    ],
    "stop": [
      {
        "command": "bash .kiro/scripts/validate-changes.sh 2>/dev/null || true",
        "timeout_ms": 120000
      }
    ]
  }
}